<!-- 
    ููููุงุช ูุงุฌูุฉ ุงููุณุชุฎุฏู ุงูุฌุฏูุฏุฉ
    SubPro Dashboard - New UI Components
    
    ูุฐุง ุงูููู ูุญุชูู ุนูู:
    - ูููุฐุฌ ุฅุถุงูุฉ ุฃูุฑุฏุฑ ูุน ุฒุฑ ุงูุชุฌุฏูุฏ
    - ูุงุฌูุฉ ุงูุฃูุฑุฏุฑุงุช ุงููุญุณูุฉ
    - ูุงุฌูุฉ ุงูุฃูููุชุงุช ุงููุญุณูุฉ
    - ุชุงุจ ุฅุญุตุงุฆูุงุช ุงูุดููุชุงุช
    - ูุธุงู ุงูุชูุจููุงุช
-->

<!-- ============================================ -->
<!-- ูููุฐุฌ ุงูุจุญุซ ุนู ุงุดุชุฑุงู ููุชุฌุฏูุฏ -->
<!-- ============================================ -->
<div id="renewalSearchModal" class="modal hidden fixed inset-0 bg-black bg-opacity-50 z-50 flex items-center justify-center">
    <div class="bg-white dark:bg-gray-800 rounded-lg shadow-xl w-full max-w-4xl max-h-[90vh] overflow-hidden">
        <!-- Header -->
        <div class="bg-gradient-to-r from-blue-500 to-cyan-500 p-6 text-white">
            <div class="flex justify-between items-center">
                <div>
                    <h3 class="text-2xl font-bold">๐ ุงูุจุญุซ ุนู ุงุดุชุฑุงู ููุชุฌุฏูุฏ</h3>
                    <p class="text-sm opacity-90 mt-1">ุงุจุญุซ ุนู ุงูุนููู ุฃู ุงูุงุดุชุฑุงู ุงููุฏูู ูุฅูุดุงุก ุชุฌุฏูุฏ</p>
                </div>
                <button onclick="closeRenewalSearchModal()" class="text-white hover:bg-white hover:bg-opacity-20 rounded-full p-2 transition">
                    <i class="fas fa-times text-xl"></i>
                </button>
            </div>
        </div>
        
        <!-- Search Form -->
        <div class="p-6 border-b dark:border-gray-700">
            <div class="grid grid-cols-1 md:grid-cols-2 gap-4">
                <div class="col-span-2">
                    <label class="block text-sm font-medium mb-2 dark:text-gray-300">ูููุฉ ุงูุจุญุซ</label>
                    <input type="text" id="renewalSearchTerm" 
                           placeholder="ุงุจุญุซ ุจุงูุงุณูุ ุฑูู ุงููุงุชูุ ุงูุฅููููุ ุฃู ุฑูู ุงูุฃูุฑุฏุฑ..."
                           class="w-full px-4 py-3 border rounded-lg focus:ring-2 focus:ring-blue-500 dark:bg-gray-700 dark:border-gray-600 dark:text-white">
                </div>
                <div>
                    <label class="block text-sm font-medium mb-2 dark:text-gray-300">ููุน ุงูุจุญุซ</label>
                    <select id="renewalSearchType" class="w-full px-4 py-3 border rounded-lg dark:bg-gray-700 dark:border-gray-600 dark:text-white">
                        <option value="all">ุงููู</option>
                        <option value="name">ุงูุงุณู</option>
                        <option value="phone">ุฑูู ุงููุงุชู</option>
                        <option value="email">ุงูุจุฑูุฏ ุงูุฅููุชุฑููู</option>
                        <option value="product">ุงูููุชุฌ</option>
                    </select>
                </div>
                <div class="flex items-end">
                    <button onclick="searchForRenewal()" class="w-full bg-blue-500 hover:bg-blue-600 text-white px-6 py-3 rounded-lg transition">
                        <i class="fas fa-search ml-2"></i>ุจุญุซ
                    </button>
                </div>
            </div>
        </div>
        
        <!-- Results -->
        <div class="p-6 overflow-y-auto max-h-96">
            <div id="renewalSearchResults" class="space-y-3">
                <div class="text-center text-gray-500 dark:text-gray-400 py-8">
                    <i class="fas fa-search text-4xl mb-3 opacity-50"></i>
                    <p>ุงุจุฏุฃ ุงูุจุญุซ ูุนุฑุถ ุงููุชุงุฆุฌ</p>
                </div>
            </div>
        </div>
    </div>
</div>

<!-- ============================================ -->
<!-- ูููุฐุฌ ุฅุถุงูุฉ/ุชุนุฏูู ุฃูุฑุฏุฑ ูุญุณูู -->
<!-- ============================================ -->
<div id="enhancedOrderModal" class="modal hidden fixed inset-0 bg-black bg-opacity-50 z-50 flex items-center justify-center">
    <div class="bg-white dark:bg-gray-800 rounded-lg shadow-xl w-full max-w-5xl max-h-[90vh] overflow-y-auto">
        <!-- Header -->
        <div class="bg-gradient-to-r from-green-500 to-teal-500 p-6 text-white sticky top-0 z-10">
            <div class="flex justify-between items-center">
                <div>
                    <h3 class="text-2xl font-bold" id="orderModalTitle">๐ ุฅุถุงูุฉ ุฃูุฑุฏุฑ ุฌุฏูุฏ</h3>
                    <p class="text-sm opacity-90 mt-1">ุงููุฃ ุงูุจูุงูุงุช ุจุฏูุฉ</p>
                </div>
                <div class="flex gap-2">
                    <button onclick="openRenewalSearchModal()" class="bg-blue-500 hover:bg-blue-600 px-4 py-2 rounded-lg transition">
                        <i class="fas fa-sync-alt ml-2"></i>ุชุฌุฏูุฏ
                    </button>
                    <button onclick="closeEnhancedOrderModal()" class="text-white hover:bg-white hover:bg-opacity-20 rounded-full p-2 transition">
                        <i class="fas fa-times text-xl"></i>
                    </button>
                </div>
            </div>
        </div>
        
        <!-- Form -->
        <form id="enhancedOrderForm" class="p-6 space-y-6">
            <!-- ุจูุงูุงุช ุงูุนููู -->
            <div class="bg-blue-50 dark:bg-gray-700 p-4 rounded-lg">
                <h4 class="font-bold text-lg mb-4 text-blue-700 dark:text-blue-300">
                    <i class="fas fa-user ml-2"></i>ุจูุงูุงุช ุงูุนููู
                </h4>
                <div class="grid grid-cols-1 md:grid-cols-3 gap-4">
                    <div>
                        <label class="block text-sm font-medium mb-2 dark:text-gray-300">ุงุณู ุงูุนููู *</label>
                        <input type="text" name="customer_name" required
                               class="w-full px-4 py-2 border rounded-lg dark:bg-gray-600 dark:border-gray-500 dark:text-white">
                    </div>
                    <div>
                        <label class="block text-sm font-medium mb-2 dark:text-gray-300">ุฑูู ุงููุงุชู</label>
                        <input type="tel" name="customer_phone"
                               class="w-full px-4 py-2 border rounded-lg dark:bg-gray-600 dark:border-gray-500 dark:text-white">
                    </div>
                    <div>
                        <label class="block text-sm font-medium mb-2 dark:text-gray-300">ุงูุจุฑูุฏ ุงูุฅููุชุฑููู</label>
                        <input type="email" name="customer_email"
                               class="w-full px-4 py-2 border rounded-lg dark:bg-gray-600 dark:border-gray-500 dark:text-white">
                    </div>
                </div>
            </div>
            
            <!-- ุจูุงูุงุช ุงูููุชุฌ ูุงูุณุนุฑ -->
            <div class="bg-green-50 dark:bg-gray-700 p-4 rounded-lg">
                <h4 class="font-bold text-lg mb-4 text-green-700 dark:text-green-300">
                    <i class="fas fa-box ml-2"></i>ุจูุงูุงุช ุงูููุชุฌ
                </h4>
                <div class="grid grid-cols-1 md:grid-cols-4 gap-4">
                    <div>
                        <label class="block text-sm font-medium mb-2 dark:text-gray-300">ุงูููุชุฌ *</label>
                        <select name="product" required
                                class="w-full px-4 py-2 border rounded-lg dark:bg-gray-600 dark:border-gray-500 dark:text-white">
                            <option value="">ุงุฎุชุฑ ุงูููุชุฌ</option>
                            <!-- ุณูุชู ููุคูุง ุฏููุงููููุงู -->
                        </select>
                    </div>
                    <div>
                        <label class="block text-sm font-medium mb-2 dark:text-gray-300">ุงูุณุนุฑ *</label>
                        <input type="number" name="price" required min="0" step="0.01"
                               class="w-full px-4 py-2 border rounded-lg dark:bg-gray-600 dark:border-gray-500 dark:text-white">
                    </div>
                    <div>
                        <label class="block text-sm font-medium mb-2 dark:text-gray-300">ุงูุชูููุฉ</label>
                        <input type="number" name="cost" min="0" step="0.01"
                               class="w-full px-4 py-2 border rounded-lg dark:bg-gray-600 dark:border-gray-500 dark:text-white">
                    </div>
                    <div>
                        <label class="block text-sm font-medium mb-2 dark:text-gray-300">ุงูุฑุจุญ</label>
                        <input type="number" name="profit" readonly
                               class="w-full px-4 py-2 border rounded-lg bg-gray-100 dark:bg-gray-600 dark:border-gray-500 dark:text-white">
                    </div>
                </div>
            </div>
            
            <!-- ุจูุงูุงุช ุงูุงุดุชุฑุงู -->
            <div class="bg-purple-50 dark:bg-gray-700 p-4 rounded-lg">
                <h4 class="font-bold text-lg mb-4 text-purple-700 dark:text-purple-300">
                    <i class="fas fa-calendar-alt ml-2"></i>ุจูุงูุงุช ุงูุงุดุชุฑุงู
                </h4>
                <div class="grid grid-cols-1 md:grid-cols-3 gap-4">
                    <div>
                        <label class="block text-sm font-medium mb-2 dark:text-gray-300">ูุฏุฉ ุงูุงุดุชุฑุงู (ุจุงูุฃุดูุฑ)</label>
                        <input type="number" name="subscription_duration_months" min="1" value="1"
                               class="w-full px-4 py-2 border rounded-lg dark:bg-gray-600 dark:border-gray-500 dark:text-white">
                    </div>
                    <div>
                        <label class="block text-sm font-medium mb-2 dark:text-gray-300">ุชูุฑุงุฑ ุชุบููุฑ ุงูุญุณุงุจ</label>
                        <select name="account_change_frequency"
                                class="w-full px-4 py-2 border rounded-lg dark:bg-gray-600 dark:border-gray-500 dark:text-white">
                            <option value="none">ูุง ููุฌุฏ</option>
                            <option value="monthly">ุดูุฑูุงู</option>
                            <option value="quarterly">ูู 3 ุฃุดูุฑ</option>
                            <option value="semi_annual">ูู 6 ุฃุดูุฑ</option>
                        </select>
                    </div>
                    <div class="flex items-center">
                        <label class="flex items-center cursor-pointer">
                            <input type="checkbox" name="auto_renew" class="ml-2 w-5 h-5">
                            <span class="text-sm font-medium dark:text-gray-300">ุชุฌุฏูุฏ ุชููุงุฆู</span>
                        </label>
                    </div>
                </div>
            </div>
            
            <!-- ุจูุงูุงุช ุงูุฏูุน -->
            <div class="bg-yellow-50 dark:bg-gray-700 p-4 rounded-lg">
                <h4 class="font-bold text-lg mb-4 text-yellow-700 dark:text-yellow-300">
                    <i class="fas fa-money-bill-wave ml-2"></i>ุจูุงูุงุช ุงูุฏูุน
                </h4>
                <div class="grid grid-cols-1 md:grid-cols-3 gap-4">
                    <div>
                        <label class="block text-sm font-medium mb-2 dark:text-gray-300">ุญุงูุฉ ุงูุฏูุน</label>
                        <select name="payment_status"
                                class="w-full px-4 py-2 border rounded-lg dark:bg-gray-600 dark:border-gray-500 dark:text-white">
                            <option value="unpaid">ุบูุฑ ูุฏููุน</option>
                            <option value="partial">ูุฏููุน ุฌุฒุฆูุงู</option>
                            <option value="paid">ูุฏููุน ุจุงููุงูู</option>
                        </select>
                    </div>
                    <div>
                        <label class="block text-sm font-medium mb-2 dark:text-gray-300">ุงููุจูุบ ุงููุฏููุน</label>
                        <input type="number" name="amount_paid" min="0" step="0.01" value="0"
                               class="w-full px-4 py-2 border rounded-lg dark:bg-gray-600 dark:border-gray-500 dark:text-white">
                    </div>
                    <div>
                        <label class="block text-sm font-medium mb-2 dark:text-gray-300">ุงููุจูุบ ุงููุชุจูู</label>
                        <input type="number" name="amount_remaining" readonly
                               class="w-full px-4 py-2 border rounded-lg bg-gray-100 dark:bg-gray-600 dark:border-gray-500 dark:text-white">
                    </div>
                </div>
            </div>
            
            <!-- ุจูุงูุงุช ุงูุญุณุงุจ -->
            <div class="bg-indigo-50 dark:bg-gray-700 p-4 rounded-lg">
                <h4 class="font-bold text-lg mb-4 text-indigo-700 dark:text-indigo-300">
                    <i class="fas fa-key ml-2"></i>ุจูุงูุงุช ุงูุญุณุงุจ
                </h4>
                <div class="grid grid-cols-1 md:grid-cols-2 gap-4">
                    <div>
                        <label class="block text-sm font-medium mb-2 dark:text-gray-300">ุงูุจุฑูุฏ ุงูุฅููุชุฑููู ููุญุณุงุจ</label>
                        <input type="email" name="account_email"
                               class="w-full px-4 py-2 border rounded-lg dark:bg-gray-600 dark:border-gray-500 dark:text-white">
                    </div>
                    <div>
                        <label class="block text-sm font-medium mb-2 dark:text-gray-300">ูููุฉ ุงููุฑูุฑ</label>
                        <input type="text" name="account_password"
                               class="w-full px-4 py-2 border rounded-lg dark:bg-gray-600 dark:border-gray-500 dark:text-white">
                    </div>
                </div>
            </div>
            
            <!-- ุฃุฒุฑุงุฑ ุงูุฅุฌุฑุงุกุงุช -->
            <div class="flex gap-3 pt-4 border-t dark:border-gray-700">
                <button type="submit" class="flex-1 bg-green-500 hover:bg-green-600 text-white px-6 py-3 rounded-lg transition font-bold">
                    <i class="fas fa-save ml-2"></i>ุญูุธ ุงูุฃูุฑุฏุฑ
                </button>
                <button type="button" onclick="closeEnhancedOrderModal()" class="px-6 py-3 border border-gray-300 dark:border-gray-600 rounded-lg hover:bg-gray-100 dark:hover:bg-gray-700 transition">
                    ุฅูุบุงุก
                </button>
            </div>
        </form>
    </div>
</div>

<!-- ============================================ -->
<!-- ุชุงุจ ุฅุญุตุงุฆูุงุช ุงูุดููุชุงุช ูุงูููุชุฌุงุช -->
<!-- ============================================ -->
<div id="shiftProductStatsTab" class="tab-content hidden">
    <div class="bg-white dark:bg-gray-800 rounded-lg shadow-lg p-6">
        <!-- Header -->
        <div class="flex justify-between items-center mb-6">
            <div>
                <h2 class="text-2xl font-bold dark:text-white">๐ ุฅุญุตุงุฆูุงุช ุงูุดููุชุงุช ูุงูููุชุฌุงุช</h2>
                <p class="text-gray-600 dark:text-gray-400 mt-1">ุชุญููู ุชูุตููู ููู ุดููุช ูููุชุฌ</p>
            </div>
            <div class="flex gap-3">
                <input type="date" id="shiftStatsDate" class="px-4 py-2 border rounded-lg dark:bg-gray-700 dark:border-gray-600 dark:text-white">
                <button onclick="loadShiftProductStats()" class="bg-blue-500 hover:bg-blue-600 text-white px-6 py-2 rounded-lg transition">
                    <i class="fas fa-sync ml-2"></i>ุชุญุฏูุซ
                </button>
                <button onclick="exportShiftProductStats()" class="bg-green-500 hover:bg-green-600 text-white px-6 py-2 rounded-lg transition">
                    <i class="fas fa-file-excel ml-2"></i>ุชุตุฏูุฑ
                </button>
            </div>
        </div>
        
        <!-- Shift Cards -->
        <div class="grid grid-cols-1 md:grid-cols-3 gap-6 mb-8">
            <!-- Evening Shift -->
            <div class="bg-gradient-to-br from-blue-500 to-cyan-500 rounded-lg p-6 text-white">
                <div class="flex items-center justify-between mb-4">
                    <div>
                        <h3 class="text-lg font-bold">ุดููุช ุงูุนุตุฑ</h3>
                        <p class="text-sm opacity-90">4ู - 12ู</p>
                    </div>
                    <i class="fas fa-cloud-sun text-4xl opacity-80"></i>
                </div>
                <div class="space-y-2">
                    <div class="flex justify-between">
                        <span>ุนุฏุฏ ุงูุฃูุฑุฏุฑุงุช:</span>
                        <span class="font-bold" id="eveningOrderCount">0</span>
                    </div>
                    <div class="flex justify-between">
                        <span>ุฅุฌูุงูู ุงููุจูุนุงุช:</span>
                        <span class="font-bold" id="eveningTotalSales">0 ุฌ</span>
                    </div>
                </div>
            </div>
            
            <!-- Night Shift -->
            <div class="bg-gradient-to-br from-indigo-500 to-purple-600 rounded-lg p-6 text-white">
                <div class="flex items-center justify-between mb-4">
                    <div>
                        <h3 class="text-lg font-bold">ุดููุช ุงูููู</h3>
                        <p class="text-sm opacity-90">12ู - 8ุต</p>
                    </div>
                    <i class="fas fa-moon text-4xl opacity-80"></i>
                </div>
                <div class="space-y-2">
                    <div class="flex justify-between">
                        <span>ุนุฏุฏ ุงูุฃูุฑุฏุฑุงุช:</span>
                        <span class="font-bold" id="nightOrderCount">0</span>
                    </div>
                    <div class="flex justify-between">
                        <span>ุฅุฌูุงูู ุงููุจูุนุงุช:</span>
                        <span class="font-bold" id="nightTotalSales">0 ุฌ</span>
                    </div>
                </div>
            </div>
            
            <!-- Morning Shift -->
            <div class="bg-gradient-to-br from-yellow-500 to-orange-500 rounded-lg p-6 text-white">
                <div class="flex items-center justify-between mb-4">
                    <div>
                        <h3 class="text-lg font-bold">ุดููุช ุงูุตุจุญ</h3>
                        <p class="text-sm opacity-90">8ุต - 4ู</p>
                    </div>
                    <i class="fas fa-sun text-4xl opacity-80"></i>
                </div>
                <div class="space-y-2">
                    <div class="flex justify-between">
                        <span>ุนุฏุฏ ุงูุฃูุฑุฏุฑุงุช:</span>
                        <span class="font-bold" id="morningOrderCount">0</span>
                    </div>
                    <div class="flex justify-between">
                        <span>ุฅุฌูุงูู ุงููุจูุนุงุช:</span>
                        <span class="font-bold" id="morningTotalSales">0 ุฌ</span>
                    </div>
                </div>
            </div>
        </div>
        
        <!-- Products per Shift Table -->
        <div class="bg-gray-50 dark:bg-gray-700 rounded-lg p-6">
            <h3 class="text-xl font-bold mb-4 dark:text-white">ุชูุตูู ุงูููุชุฌุงุช ููู ุดููุช</h3>
            <div class="overflow-x-auto">
                <table class="w-full" id="shiftProductTable">
                    <thead>
                        <tr class="bg-gray-200 dark:bg-gray-600">
                            <th class="px-4 py-3 text-right dark:text-white">ุงูููุชุฌ</th>
                            <th class="px-4 py-3 text-center dark:text-white">ุดููุช ุงูุนุตุฑ</th>
                            <th class="px-4 py-3 text-center dark:text-white">ุดููุช ุงูููู</th>
                            <th class="px-4 py-3 text-center dark:text-white">ุดููุช ุงูุตุจุญ</th>
                            <th class="px-4 py-3 text-center dark:text-white">ุงูุฅุฌูุงูู</th>
                        </tr>
                    </thead>
                    <tbody id="shiftProductTableBody" class="divide-y dark:divide-gray-600">
                        <!-- ุณูุชู ููุคูุง ุฏููุงููููุงู -->
                    </tbody>
                </table>
            </div>
        </div>
    </div>
</div>

<!-- ============================================ -->
<!-- ูุธุงู ุงูุชูุจููุงุช ุงููุญุณูู -->
<!-- ============================================ -->
<div id="notificationsPanel" class="fixed left-4 top-20 w-96 max-h-[80vh] bg-white dark:bg-gray-800 rounded-lg shadow-2xl overflow-hidden hidden z-40">
    <!-- Header -->
    <div class="bg-gradient-to-r from-red-500 to-pink-500 p-4 text-white">
        <div class="flex justify-between items-center">
            <div>
                <h3 class="font-bold text-lg">๐ ุงูุชูุจููุงุช</h3>
                <p class="text-sm opacity-90">ูุฏูู <span id="unreadNotifCount">0</span> ุชูุจูู ุบูุฑ ููุฑูุก</p>
            </div>
            <button onclick="closeNotificationsPanel()" class="hover:bg-white hover:bg-opacity-20 rounded-full p-2 transition">
                <i class="fas fa-times"></i>
            </button>
        </div>
    </div>
    
    <!-- Filters -->
    <div class="p-3 border-b dark:border-gray-700 flex gap-2">
        <button onclick="filterNotifications('all')" class="flex-1 px-3 py-2 text-sm rounded-lg bg-gray-100 dark:bg-gray-700 hover:bg-gray-200 dark:hover:bg-gray-600 transition">
            ุงููู
        </button>
        <button onclick="filterNotifications('unread')" class="flex-1 px-3 py-2 text-sm rounded-lg bg-gray-100 dark:bg-gray-700 hover:bg-gray-200 dark:hover:bg-gray-600 transition">
            ุบูุฑ ููุฑูุก
        </button>
        <button onclick="markAllAsRead()" class="px-3 py-2 text-sm rounded-lg bg-blue-500 text-white hover:bg-blue-600 transition">
            <i class="fas fa-check-double"></i>
        </button>
    </div>
    
    <!-- Notifications List -->
    <div id="notificationsList" class="overflow-y-auto max-h-[60vh] divide-y dark:divide-gray-700">
        <!-- ุณูุชู ููุคูุง ุฏููุงููููุงู -->
    </div>
</div>

<style>
/* ุชุญุณููุงุช CSS ููููููุงุช ุงูุฌุฏูุฏุฉ */
.modal {
    backdrop-filter: blur(4px);
}

.excel-table {
    border-collapse: separate;
    border-spacing: 0;
}

.excel-table th {
    position: sticky;
    top: 0;
    background: #f3f4f6;
    z-index: 10;
}

.excel-table tbody tr:hover {
    background: #f9fafb;
    transform: scale(1.01);
    box-shadow: 0 2px 8px rgba(0,0,0,0.1);
    transition: all 0.2s;
}

.notification-item {
    transition: all 0.3s;
}

.notification-item:hover {
    background: #f3f4f6;
}

.notification-item.unread {
    border-right: 4px solid #3b82f6;
    background: #eff6ff;
}

/* Dark mode adjustments */
.dark .excel-table th {
    background: #374151;
}

.dark .excel-table tbody tr:hover {
    background: #1f2937;
}

.dark .notification-item:hover {
    background: #374151;
}

.dark .notification-item.unread {
    background: #1e3a5f;
}
</style>
